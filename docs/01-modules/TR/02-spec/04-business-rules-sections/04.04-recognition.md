# 4. Recognition Rules

## Category: Recognition Program Setup

### BR-TR-REC-001: Program Code Uniqueness

**Priority**: HIGH

**Description**:
Each recognition program must have a unique code within the legal entity.

**Conditions**:
```
IF creating RecognitionProgram
AND code exists in same legal entity
THEN reject
```

**Rules**:
1. Code unique per legal entity
2. Format: uppercase with underscores
3. Maximum 50 characters
4. Cannot be changed once created
5. Descriptive naming (e.g., SPOT_AWARD, SERVICE_ANNIVERSARY)

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_001`: "Recognition program code '{code}' already exists in legal entity '{entity}'."

**Related Requirements**:
- FR-TR-REC-001

**Related Entities**:
- RecognitionProgram

---

### BR-TR-REC-002: Program Type Validation

**Priority**: HIGH

**Description**:
Recognition program type determines award rules and configuration.

**Conditions**:
```
IF creating RecognitionProgram
THEN type must be valid
```

**Rules**:
1. Valid types:
   - SPOT_AWARD: immediate recognition for achievements
   - SERVICE_ANNIVERSARY: years of service milestones
   - PEER_TO_PEER: employee-nominated recognition
   - MANAGER_AWARD: manager-initiated awards
   - PERFORMANCE_AWARD: tied to performance ratings
   - TEAM_AWARD: team-based recognition
2. Type determines:
   - Nomination workflow
   - Approval requirements
   - Award types allowed
3. Cannot change type after awards issued

**Exceptions**:
- Type change requires new program creation

**Error Messages**:
- `ERR_REC_002`: "Invalid recognition program type '{type}'."

**Related Requirements**:
- FR-TR-REC-001

**Related Entities**:
- RecognitionProgram

---

### BR-TR-REC-003: Award Type Configuration

**Priority**: MEDIUM

**Description**:
Configure award types available in recognition program.

**Conditions**:
```
IF defining award types
THEN specify:
  - Award category
  - Award value/points
  - Eligibility rules
```

**Rules**:
1. Award categories:
   - MONETARY: cash award
   - POINTS: redeemable points
   - GIFT_CARD: gift card
   - TROPHY: physical award
   - CERTIFICATE: certificate of recognition
   - TIME_OFF: additional PTO
2. Each award type has:
   - Unique code
   - Display name
   - Value (monetary or points)
   - Tax treatment
3. Multiple award types per program allowed
4. Award values configurable

**Exceptions**:
- Some programs may have single award type only

**Error Messages**:
- `ERR_REC_003`: "Award type code '{code}' already exists in program."

**Examples**:
```yaml
Example: Spot award configuration
  Input:
    program: SPOT_AWARD
    award_types:
      - code: SPOT_100
        name: "Spot Award $100"
        category: MONETARY
        value: 100 USD
        taxable: true
      - code: SPOT_POINTS_500
        name: "500 Recognition Points"
        category: POINTS
        value: 500
        taxable: false
  
  Validation:
    BR-REC-003: PASS
  
  Output:
    2 award types configured
```

**Related Requirements**:
- FR-TR-REC-002

**Related Entities**:
- AwardType

---

### BR-TR-REC-004: Program Eligibility Rules

**Priority**: HIGH

**Description**:
Define eligibility rules for recognition program participation.

**Conditions**:
```
IF defining eligibility
THEN rules must be valid and enforceable
```

**Rules**:
1. Eligibility criteria:
   - Employment type (FULL_TIME, PART_TIME, etc.)
   - Minimum tenure (e.g., 90 days)
   - Grade/level requirements
   - Location requirements
   - Performance standing (not on PIP)
2. Rules defined as JSON expressions
3. Separate eligibility for:
   - Nominators (who can nominate)
   - Recipients (who can receive awards)
4. Eligibility evaluated at nomination time

**Exceptions**:
- Service anniversary: all employees eligible

**Error Messages**:
- `ERR_REC_004`: "Eligibility rule syntax invalid: {error}."

**Related Requirements**:
- FR-TR-REC-001

**Related Entities**:
- RecognitionProgram

---

### BR-TR-REC-005: Budget Allocation

**Priority**: HIGH

**Description**:
Allocate budget for recognition programs.

**Conditions**:
```
IF creating program budget
THEN validate:
  - Budget amount > 0
  - Budget period defined
  - Allocation by department (optional)
```

**Rules**:
1. Budget types:
   - Annual budget
   - Quarterly budget
   - Unlimited (no budget constraint)
2. Budget tracked by:
   - Program
   - Department
   - Legal entity
3. Budget consumption tracked in real-time
4. Alerts at 80%, 90%, 100% consumption
5. Over-budget requires approval

**Exceptions**:
- Service anniversary typically unlimited budget

**Error Messages**:
- `ERR_REC_005`: "Budget allocation {amount} invalid."
- `WARN_REC_005`: "Budget {percentage}% consumed."

**Related Requirements**:
- FR-TR-REC-009

**Related Entities**:
- RecognitionProgram

---

### BR-TR-REC-006: Award Value Limits

**Priority**: MEDIUM

**Description**:
Define minimum and maximum award values.

**Conditions**:
```
IF defining award
THEN value must be within limits
```

**Rules**:
1. Limits by award type:
   - Spot awards: $25 - $500
   - Service awards: $100 - $5,000 (based on years)
   - Team awards: $500 - $10,000
2. Limits configurable per program
3. Limits may vary by employee level
4. Exceeding limit requires approval
5. Tax implications for high-value awards

**Exceptions**:
- Executive awards may exceed standard limits

**Error Messages**:
- `ERR_REC_006`: "Award value {value} exceeds maximum {max}."

**Related Requirements**:
- FR-TR-REC-002

**Related Entities**:
- AwardType

---

### BR-TR-REC-007: Program Effective Dates

**Priority**: MEDIUM

**Description**:
Recognition programs must have valid effective dates.

**Conditions**:
```
IF creating/updating program
THEN effective_from < effective_to
```

**Rules**:
1. Effective from < effective to
2. Programs can be:
   - Active: currently running
   - Scheduled: future start date
   - Expired: past end date
3. Cannot nominate for expired programs
4. Future-dated programs allowed
5. Cannot modify historical effective dates

**Exceptions**:
- Ongoing programs: no end date

**Error Messages**:
- `ERR_REC_007`: "Program effective dates invalid: from={from}, to={to}."

**Related Requirements**:
- FR-TR-REC-001

**Related Entities**:
- RecognitionProgram

---

### BR-TR-REC-008: Service Anniversary Milestones

**Priority**: MEDIUM

**Description**:
Define service anniversary milestones and corresponding awards.

**Conditions**:
```
IF program_type = SERVICE_ANNIVERSARY
THEN define milestones
```

**Rules**:
1. Standard milestones:
   - 1 year, 3 years, 5 years
   - 10 years, 15 years, 20 years
   - 25 years, 30 years, 35 years, 40 years
2. Each milestone has:
   - Years of service
   - Award type
   - Award value
3. Milestones auto-triggered on anniversary date
4. Employee notified of upcoming milestone (30 days prior)
5. Award processed automatically

**Exceptions**:
- Custom milestones allowed (e.g., 2 years, 7 years)

**Error Messages**:
- `ERR_REC_008`: "Milestone configuration invalid."

**Examples**:
```yaml
Example: Service anniversary milestones
  Input:
    program: SERVICE_ANNIVERSARY
    milestones:
      - years: 1, award: CERTIFICATE, value: 0
      - years: 5, award: GIFT_CARD, value: 500000 VND
      - years: 10, award: MONETARY, value: 2000000 VND
      - years: 20, award: MONETARY, value: 5000000 VND
  
  Validation:
    BR-REC-008: PASS
  
  Output:
    4 milestones configured
```

**Related Requirements**:
- FR-TR-REC-003

**Related Entities**:
- RecognitionProgram
- AwardType

---

### BR-TR-REC-009: Points System Configuration

**Priority**: MEDIUM

**Description**:
Configure points-based recognition system.

**Conditions**:
```
IF award_type = POINTS
THEN configure:
  - Points value
  - Redemption catalog
  - Points expiration
```

**Rules**:
1. Points configuration:
   - Points per award
   - Points to currency conversion (for redemption)
   - Points expiration period (e.g., 12 months)
2. Points balance tracked per employee
3. Points can be:
   - Earned through awards
   - Redeemed for rewards
   - Expired if not used
4. Points history maintained
5. Points non-transferable

**Exceptions**:
- Some programs have non-expiring points

**Error Messages**:
- `ERR_REC_009`: "Points configuration invalid."

**Related Requirements**:
- FR-TR-REC-002
- FR-TR-REC-010

**Related Entities**:
- AwardType
- PointsBalance

---

### BR-TR-REC-010: Program Activation Rules

**Priority**: MEDIUM

**Description**:
Define rules for activating recognition programs.

**Conditions**:
```
IF activating program
THEN program must be complete and valid
```

**Rules**:
1. Program activation checklist:
   - Program details complete
   - Award types defined
   - Eligibility rules defined
   - Budget allocated (if applicable)
   - Approval workflow configured
2. Cannot activate incomplete program
3. Activation makes program available for nominations
4. Can deactivate program (no new nominations)
5. Cannot delete program with issued awards

**Exceptions**:
- Draft programs can be saved incomplete

**Error Messages**:
- `ERR_REC_010`: "Cannot activate program: {missing_items} incomplete."

**Related Requirements**:
- FR-TR-REC-001

**Related Entities**:
- RecognitionProgram

---

**Status**: ✅ Recognition Batch 1 Complete (BR-REC-001 to BR-REC-010)

**Progress**: 177/~300 rules (59%)

**Next**: Recognition Batch 2 - Nominations & Approvals (BR-REC-011 to REC-020)


## Category: Nominations & Approvals

### BR-TR-REC-011: Nomination Submission Validation

**Priority**: HIGH

**Description**:
Validate nomination submissions before processing.

**Conditions**:
```
IF submitting nomination
THEN validate:
  - Nominator is eligible
  - Recipient is eligible
  - Program is active
  - Required fields complete
```

**Rules**:
1. Nominator must be eligible per program rules
2. Recipient must be eligible per program rules
3. Program must be active (not expired)
4. Required fields:
   - Recipient employee ID
   - Award type
   - Nomination reason/description
   - Supporting details (if required)
5. Cannot nominate self (except peer-to-peer programs)

**Exceptions**:
- Manager awards: manager can nominate own team
- Service awards: auto-generated, no nomination needed

**Error Messages**:
- `ERR_REC_011`: "Nomination invalid: {reason}."

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination

---

### BR-TR-REC-012: Duplicate Nomination Prevention

**Priority**: MEDIUM

**Description**:
Prevent duplicate nominations for the same employee within a short timeframe.

**Conditions**:
```
IF nominating employee
AND same nominator nominated same employee for same event type
AND within 30 days
THEN reject as duplicate
```

**Rules**:
1. Cannot nominate same employee for same event type within 30 days
2. Different event types allowed (e.g., Teamwork + Innovation)
3. Different nominators can nominate same employee
4. System tracks nomination history per nominator-nominee-event combination
5. Warning shown before submission if potential duplicate

**Exceptions**:
- Service anniversaries: auto-generated, no duplicate check
- Manager can override duplicate check with justification

**Error Messages**:
- `ERR_REC_012`: "Duplicate nomination: You already nominated {employee} for {event_type} on {date}."
- `WARN_REC_012`: "You nominated this employee recently. Are you sure you want to submit?"

**Examples**:
```yaml
Example: Duplicate Prevention
  Input:
    nominator: John Doe
    nominee: Jane Smith
    event_type: TEAMWORK_EXCELLENCE
    date: "2025-12-15"
  
  Check History:
    Previous Nomination:
      nominator: John Doe
      nominee: Jane Smith
      event_type: TEAMWORK_EXCELLENCE
      date: "2025-11-20" (25 days ago)
  
  Validation:
    BR-TR-REC-012: FAIL (within 30 days)
  
  Output:
    Error: ERR_REC_012
    Suggestion: "Try a different event type or wait until Dec 20"
```

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- RecognitionTransaction

---

### BR-TR-REC-013: Nomination Approval Workflow

**Priority**: HIGH

**Description**:
Route high-value nominations through approval workflow.

**Conditions**:
```
IF nomination points > approval_threshold
THEN require approval before awarding
```

**Rules**:
1. Nominations >500 points require approval
2. Approval routing:
   - 500-1000 points: Manager's manager
   - 1000-2000 points: Director
   - >2000 points: VP or above
3. Approver can:
   - Approve (award points)
   - Reject (with reason)
   - Adjust points (within limits)
4. Auto-approve if no response in 5 business days
5. Nominator and nominee notified of decision

**Exceptions**:
- Service anniversaries: auto-approved (system-generated)
- CEO awards: no approval needed

**Error Messages**:
- `ERR_REC_013`: "Nomination requires approval from {approver_role}."

**Examples**:
```yaml
Example: High-Value Nomination
  Input:
    nominator: Sarah Johnson (Manager)
    nominee: Mike Chen
    event_type: INNOVATION_AWARD
    points: 1,500
  
  Approval Routing:
    Threshold: 1,000 points
    Required Approver: Director (Tom Wilson)
    Notification: Email + In-app
    SLA: 5 business days
  
  Workflow:
    1. Nomination submitted (status: PENDING_APPROVAL)
    2. Tom Wilson notified
    3. Tom approves (status: APPROVED)
    4. Points awarded to Mike Chen
    5. Sarah and Mike notified
  
  Validation:
    BR-TR-REC-013: PASS
```

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- RecognitionApproval

---

### BR-TR-REC-014: Approval Thresholds

**Priority**: HIGH

**Description**:
Define approval thresholds based on points value and organizational hierarchy.

**Conditions**:
```
IF nomination points >= threshold
THEN route to appropriate approver level
```

**Rules**:
1. Threshold levels:
   - <500: Auto-approved
   - 500-1000: Manager's manager
   - 1000-2000: Director
   - 2000-5000: VP
   - >5000: C-level
2. Thresholds configurable per legal entity
3. Multiple approvals required for >5000 points
4. Budget impact considered in approval
5. Approver must be higher in hierarchy than nominator

**Exceptions**:
- Emergency recognition: CEO can override thresholds

**Error Messages**:
- `ERR_REC_014`: "Points value {points} requires {approver_level} approval."

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionApproval
- ApprovalThreshold

---

### BR-TR-REC-015: Approval Delegation

**Priority**: MEDIUM

**Description**:
Allow approvers to delegate approval authority when unavailable.

**Conditions**:
```
IF approver unavailable (OOO, on leave)
THEN delegate to designated backup
```

**Rules**:
1. Approver can designate backup approver
2. Delegation period: start and end dates
3. Backup must be same or higher level
4. Delegation logged for audit
5. Original approver can revoke delegation anytime
6. System auto-routes to backup during delegation period

**Exceptions**:
- C-level approvals: cannot be delegated

**Error Messages**:
- `ERR_REC_015`: "Approval delegation failed: {reason}."

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionApproval
- ApprovalDelegation

---

### BR-TR-REC-016: Nomination Denial Reasons

**Priority**: MEDIUM

**Description**:
Require documented reason when denying nominations.

**Conditions**:
```
IF approver denies nomination
THEN must provide denial reason
```

**Rules**:
1. Denial reason required (min 20 characters)
2. Common reasons:
   - Insufficient justification
   - Duplicate recognition
   - Not aligned with event type
   - Budget constraints
   - Timing issues
3. Denial reason visible to nominator only
4. Nominee not notified of denied nominations
5. Nominator can resubmit with modifications

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_016`: "Denial reason required (minimum 20 characters)."

**Examples**:
```yaml
Example: Nomination Denial
  Input:
    nomination_id: NOM-2025-001
    approver: Tom Wilson (Director)
    action: DENY
    reason: "The described achievement is part of normal job duties and doesn't meet the Innovation Award criteria. Consider submitting for Teamwork Excellence instead."
  
  System Actions:
    1. Update nomination status: DENIED
    2. Log denial with reason
    3. Notify nominator (Sarah) with reason
    4. Do NOT notify nominee (Mike)
    5. Allow resubmission
  
  Validation:
    BR-TR-REC-016: PASS (reason > 20 chars)
```

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- RecognitionApproval

---

### BR-TR-REC-017: Nomination Frequency Limits

**Priority**: MEDIUM

**Description**:
Limit nomination frequency to prevent gaming the system.

**Conditions**:
```
IF nominator exceeds frequency limit
THEN warn or block nomination
```

**Rules**:
1. Limits per nominator:
   - Max 10 nominations per month
   - Max 3 nominations per week
   - Max 1 nomination per day for same nominee
2. Limits configurable by program
3. Warnings at 80% of limit
4. Managers have higher limits (20/month)
5. Limits reset monthly

**Exceptions**:
- Service anniversaries: excluded from limits
- HR administrators: no limits

**Error Messages**:
- `ERR_REC_017`: "Nomination limit reached: {current}/{max} this month."
- `WARN_REC_017`: "You have submitted {count} nominations this month (limit: {max})."

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- NominationLimit

---

### BR-TR-REC-018: Batch Nomination Processing

**Priority**: LOW

**Description**:
Allow managers to nominate multiple employees at once for team achievements.

**Conditions**:
```
IF nominating multiple employees
THEN validate each and process as batch
```

**Rules**:
1. Max 50 employees per batch nomination
2. All nominees receive same points
3. Same event type and message for all
4. Individual validation per nominee
5. Partial success allowed (some approved, some rejected)
6. Batch summary report generated

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_018`: "Batch nomination failed: {failed_count} of {total_count} nominations invalid."

**Examples**:
```yaml
Example: Team Achievement Batch
  Input:
    nominator: Sarah Johnson (Manager)
    nominees: [Mike, Jane, Tom, Lisa, John] (5 employees)
    event_type: TEAM_ACHIEVEMENT
    points: 500 each
    message: "Outstanding Q4 performance - 120% of target!"
  
  Processing:
    Nominee 1 (Mike): ✅ Valid, points awarded
    Nominee 2 (Jane): ✅ Valid, points awarded
    Nominee 3 (Tom): ❌ Not eligible (probation)
    Nominee 4 (Lisa): ✅ Valid, points awarded
    Nominee 5 (John): ✅ Valid, points awarded
  
  Result:
    Success: 4/5 nominations
    Failed: 1 (Tom - not eligible)
    Total Points: 2,000 (4 × 500)
  
  Validation:
    BR-TR-REC-018: PARTIAL SUCCESS
```

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- BatchNomination

---

### BR-TR-REC-019: Nomination Notification

**Priority**: MEDIUM

**Description**:
Send notifications for nomination events to relevant parties.

**Conditions**:
```
IF nomination event occurs
THEN notify relevant parties
```

**Rules**:
1. Notifications sent for:
   - Nomination submitted (to nominee if auto-approved)
   - Approval required (to approver)
   - Nomination approved (to nominator and nominee)
   - Nomination denied (to nominator only)
2. Notification channels: Email + In-app
3. Notification includes:
   - Event type and points
   - Nominator name (if public)
   - Recognition message
   - Action links
4. Nominee can opt-out of public notifications
5. Digest option: daily summary instead of real-time

**Exceptions**:
- Private recognitions: nominee only, no public announcement

**Error Messages**:
- `ERR_REC_019`: "Notification delivery failed: {reason}."

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionNomination
- Notification

---

### BR-TR-REC-020: Approval SLA Enforcement

**Priority**: MEDIUM

**Description**:
Enforce service level agreements for nomination approvals.

**Conditions**:
```
IF nomination pending approval
AND SLA deadline approaching/passed
THEN escalate or auto-approve
```

**Rules**:
1. SLA: 5 business days for approval
2. Reminders sent:
   - Day 3: First reminder to approver
   - Day 4: Second reminder + notify approver's manager
   - Day 5: Final reminder
3. After SLA:
   - Auto-approve nomination
   - Log SLA breach
   - Notify approver of auto-approval
4. SLA excludes weekends and holidays
5. Urgent nominations: 1 business day SLA

**Exceptions**:
- >5000 points: no auto-approval, escalate to next level

**Error Messages**:
- `WARN_REC_020`: "Nomination approval overdue: {days} days past SLA."

**Examples**:
```yaml
Example: SLA Enforcement
  Input:
    nomination_id: NOM-2025-001
    submitted: "2025-12-01"
    approver: Tom Wilson
    SLA: 5 business days
    deadline: "2025-12-08"
  
  Timeline:
    Dec 1: Nomination submitted
    Dec 4: Reminder 1 sent to Tom
    Dec 5: Reminder 2 sent to Tom + notify his manager
    Dec 6: Final reminder sent
    Dec 8: SLA deadline
    Dec 9: Auto-approved (1 day past SLA)
  
  Actions:
    1. Auto-approve nomination
    2. Award points to nominee
    3. Log SLA breach
    4. Notify Tom of auto-approval
    5. Report to HR for tracking
  
  Validation:
    BR-TR-REC-020: SLA BREACHED, AUTO-APPROVED
```

**Related Requirements**:
- FR-TR-REC-004

**Related Entities**:
- RecognitionApproval
- ApprovalSLA

---

## Category: Award Redemption & Reporting

### BR-TR-REC-021: Points Redemption Validation

**Priority**: MEDIUM

**Description**:
Validate points redemption requests.

**Conditions**:
```
IF redeeming points
THEN validate:
  - Sufficient points balance
  - Reward item available
  - Delivery address valid
```

**Rules**:
1. Employee must have sufficient points
2. Reward item must be in catalog and available
3. Delivery address required for physical items
4. Points deducted upon redemption
5. Redemption confirmation sent to employee

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_021`: "Insufficient points: balance={balance}, required={required}."

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- PointsBalance
- RedemptionRequest

---

### BR-TR-REC-022: Redemption Fulfillment

**Priority**: HIGH

**Description**:
Fulfill perk redemption requests and deliver to employees.

**Conditions**:
```
IF redemption approved
THEN fulfill and deliver perk
```

**Rules**:
1. Fulfillment methods:
   - EMAIL: Digital codes sent within 1-2 business days
   - PHYSICAL: Items shipped within 5-7 business days
   - ACCOUNT_CREDIT: Applied immediately (PTO, parking)
2. Track fulfillment status:
   - PENDING → PROCESSING → SHIPPED/SENT → DELIVERED
3. Send tracking information to employee
4. Confirm delivery (auto or manual)
5. Handle fulfillment failures (refund points, retry)

**Exceptions**:
- Out of stock: refund points, offer alternatives

**Error Messages**:
- `ERR_REC_022`: "Redemption fulfillment failed: {reason}."

**Examples**:
```yaml
Example: Gift Card Fulfillment
  Input:
    redemption_id: RED-2025-001
    perk: Starbucks $50 Gift Card
    delivery_method: EMAIL
    employee_email: jane.smith@company.com
  
  Fulfillment Process:
    1. Generate gift card code from vendor API
    2. Send email with code
    3. Update status: DELIVERED
    4. Log delivery timestamp
  
  Email Content:
    Subject: "Your Starbucks Gift Card is Ready!"
    Body: "You've redeemed 1,000 points for a $50 Starbucks gift card.
           Code: SBUX-XXXX-XXXX-XXXX
           Expires: Dec 15, 2026
           Enjoy your coffee!"
  
  Validation:
    BR-TR-REC-022: PASS
```

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RedemptionOrder
- RedemptionCatalog

---

### BR-TR-REC-023: Points Expiration (FIFO)

**Priority**: HIGH

**Description**:
Expire points using FIFO (First In, First Out) method after expiration period.

**Conditions**:
```
IF points age > expiration_period (typically 12 months)
THEN expire oldest points first
```

**Rules**:
1. Expiration period: 12 months from earning date (configurable)
2. FIFO expiration: oldest points expire first
3. Expiration warnings sent:
   - 30 days before: First warning
   - 14 days before: Second warning
   - 7 days before: Final warning
4. Expired points cannot be recovered
5. Redemptions deduct from oldest points first (prevents expiration)
6. Batch expiration process runs daily

**Exceptions**:
- Lifetime points: no expiration (special programs)

**Error Messages**:
- `WARN_REC_023`: "{points} points expiring in {days} days!"
- `INFO_REC_023`: "{points} points expired on {date}."

**Examples**:
```yaml
Example: FIFO Expiration
  Current Date: 2025-12-15
  
  Point Batches:
    Batch 1 (Dec 15, 2024): 500 points → Expires Dec 15, 2025 (today)
    Batch 2 (Jan 15, 2025): 1,000 points → Expires Jan 15, 2026
    Batch 3 (Mar 15, 2025): 500 points → Expires Mar 15, 2026
  
  Expiration Process:
    1. Identify expired batches (Batch 1)
    2. Deduct 500 points from balance
    3. Log expiration transaction
    4. Send notification to employee
    5. Update point balance: 2,000 → 1,500
  
  Redemption Impact (if redeemed 500 points yesterday):
    - Deducted from Batch 1 (oldest)
    - Batch 1 now has 0 points
    - No expiration today (batch already used)
  
  Validation:
    BR-TR-REC-023: PASS (FIFO applied)
```

**Related Requirements**:
- FR-TR-REC-009

**Related Entities**:
- PointBalance
- PointTransaction

---

### BR-TR-REC-024: Award Tax Reporting

**Priority**: MEDIUM

**Description**:
Report recognition awards for tax purposes per regulatory requirements.

**Conditions**:
```
IF award value > tax_threshold
THEN report as taxable income
```

**Rules**:
1. Tax thresholds (varies by country):
   - Vietnam: Awards > 10,000,000 VND/year taxable
   - US: All awards taxable (de minimis exception <$100)
   - Singapore: Awards > SGD 200/year taxable
2. Track cumulative award value per employee per year
3. Generate tax reports:
   - Vietnam: Include in monthly PIT declaration
   - US: Form W-2 (Box 1)
   - Singapore: IR8A
4. Provide tax statements to employees
5. Coordinate with payroll for withholding

**Exceptions**:
- Service awards (<$400 value, <5 years): non-taxable (US)
- Safety awards: non-taxable (US)

**Error Messages**:
- `ERR_REC_024`: "Tax reporting failed: {reason}."

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- TaxReport

---

### BR-TR-REC-025: Recognition Statement Generation

**Priority**: LOW

**Description**:
Generate personalized recognition statements for employees.

**Conditions**:
```
IF statement period ends
THEN generate recognition statement
```

**Rules**:
1. Statement frequency: Quarterly or annual
2. Statement includes:
   - Total points earned
   - Total points redeemed
   - Total points expired
   - Current balance
   - Recognition received (who, when, why)
   - Redemptions made
3. Delivery: Email PDF or online portal
4. Secure and confidential

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_025`: "Statement generation failed: {reason}."

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- PointBalance

---

### BR-TR-REC-026: Program Participation Reporting

**Priority**: MEDIUM

**Description**:
Generate reports on recognition program participation and engagement.

**Conditions**:
```
IF reporting period ends
THEN generate participation reports
```

**Rules**:
1. Metrics tracked:
   - Participation rate (% employees giving/receiving)
   - Recognition frequency (events per employee)
   - Points awarded vs redeemed
   - Top givers and receivers
   - Department/team participation
2. Report frequency: Monthly, quarterly
3. Trend analysis: vs previous periods
4. Benchmarking: vs industry standards
5. Distribution: HR, management

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_026`: "Participation report generation failed: {reason}."

**Examples**:
```yaml
Example: Q4 Participation Report
  Period: Oct-Dec 2025
  
  Overall Participation:
    Total Employees: 500
    Gave Recognition: 350 (70%)
    Received Recognition: 425 (85%)
    Redeemed Points: 300 (60%)
  
  Recognition Events:
    Total: 850 events
    Peer: 600 (71%)
    Manager: 200 (23%)
    Milestone: 50 (6%)
  
  Points:
    Awarded: 125,000
    Redeemed: 95,000 (76%)
    Expired: 5,000 (4%)
    Balance: 25,000
  
  Top Givers:
    1. Sarah Johnson: 45 recognitions
    2. John Doe: 38 recognitions
    3. Mike Chen: 32 recognitions
  
  Trends:
    Participation: ↑ 15% vs Q3
    Redemption Rate: ↑ 10% vs Q3
    Expiration Rate: ↓ 2% vs Q3
```

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- ParticipationReport

---

### BR-TR-REC-027: Budget Consumption Reporting

**Priority**: MEDIUM

**Description**:
Track and report recognition program budget consumption.

**Conditions**:
```
IF reporting period ends
THEN generate budget consumption report
```

**Rules**:
1. Track costs:
   - Points awarded (liability)
   - Perks redeemed (actual cost)
   - Fulfillment costs
   - Administrative costs
2. Budget vs actual analysis
3. Forecast future costs based on trends
4. Alert when budget thresholds reached (80%, 95%)
5. Distribution: Finance, HR

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_027`: "Budget report generation failed: {reason}."

**Examples**:
```yaml
Example: Monthly Budget Report
  Period: December 2025
  
  Budget Allocation:
    Total Budget: $50,000
    Perk Costs: $30,000
    Admin Costs: $5,000
    Reserve: $15,000
  
  Actual Spending:
    Perks Redeemed: $28,500 (95% of budget)
    Fulfillment: $1,200
    Admin: $4,800
    Total: $34,500
  
  Outstanding Liability:
    Points Balance: 25,000 points
    Estimated Value: $7,500 (at $0.30/point)
  
  Forecast:
    Q1 2026 Redemptions: $35,000 (based on trends)
    Budget Needed: $42,000
  
  Alerts:
    ⚠️ Perk budget at 95% - consider reorder
    ✅ Admin costs within budget
```

**Related Requirements**:
- FR-TR-REC-005

**Related Entities**:
- BudgetAllocation
- RedemptionOrder

---

### BR-TR-REC-028: Award Distribution Analysis

**Priority**: LOW

**Description**:
Analyze award distribution patterns to ensure fairness and identify trends.

**Conditions**:
```
IF analysis period ends
THEN generate distribution analysis
```

**Rules**:
1. Analyze distribution by:
   - Department
   - Job level
   - Tenure
   - Location
   - Demographics (gender, age)
2. Identify disparities:
   - Departments with low recognition
   - Employees never recognized
   - Potential bias patterns
3. Recommendations for improvement
4. Quarterly analysis

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_028`: "Distribution analysis failed: {reason}."

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- Employee

---

### BR-TR-REC-029: Recognition Trends Reporting

**Priority**: LOW

**Description**:
Identify and report trends in recognition program usage.

**Conditions**:
```
IF reporting period ends
THEN analyze trends
```

**Rules**:
1. Trend metrics:
   - Participation over time
   - Popular event types
   - Peak recognition periods
   - Redemption patterns
   - Perk preferences
2. Seasonal analysis
3. Correlation with business metrics (engagement, retention)
4. Predictive analytics
5. Quarterly trend reports

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_029`: "Trend analysis failed: {reason}."

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- TrendReport

---

### BR-TR-REC-030: Payroll Integration for Monetary Awards

**Priority**: HIGH

**Description**:
Integrate monetary recognition awards with payroll for tax withholding and payment.

**Conditions**:
```
IF award is monetary (cash, gift card > threshold)
THEN integrate with payroll
```

**Rules**:
1. Monetary awards processed through payroll:
   - Cash bonuses
   - Gift cards > tax threshold
   - Taxable perks
2. Tax withholding applied per employee's tax profile
3. Included in payslip
4. Reported on tax forms (W-2, IR8A, etc.)
5. Payroll integration file generated monthly

**Exceptions**:
- Non-monetary awards: no payroll integration

**Error Messages**:
- `ERR_REC_030`: "Payroll integration failed: {reason}."

**Examples**:
```yaml
Example: Monetary Award Payroll Integration
  Input:
    employee_id: EMP_001
    award_type: SPOT_BONUS
    amount: 5,000,000 VND
    award_date: "2025-12-15"
  
  Payroll Integration:
    Payroll Period: December 2025
    Gross Pay: 50,000,000 VND (salary)
    Recognition Award: 5,000,000 VND
    Total Gross: 55,000,000 VND
    
    Tax Calculation:
      Taxable Income: 55,000,000 VND
      PIT Withholding: 5,500,000 VND (10%)
      Net Pay: 49,500,000 VND
    
    Payslip Line Item:
      Description: "Spot Bonus - Innovation Award"
      Amount: 5,000,000 VND
      Tax: 500,000 VND
  
  Validation:
    BR-TR-REC-030: PASS
```

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- RecognitionTransaction
- PayrollDeduction

---

### BR-TR-REC-031: Recognition Audit Trail

**Priority**: HIGH

**Description**:
Maintain comprehensive audit trail for all recognition transactions.

**Conditions**:
```
IF recognition transaction occurs
THEN log to audit trail
```

**Rules**:
1. Log all transactions:
   - Recognition awarded
   - Points redeemed
   - Points expired
   - Nominations submitted/approved/denied
   - Program configuration changes
2. Audit record includes:
   - Transaction type
   - User who initiated
   - Timestamp
   - Before/after values
   - Reason/justification
   - IP address
3. Immutable audit records
4. Retention: 7 years
5. Searchable and reportable

**Exceptions**:
- None

**Error Messages**:
- `ERR_REC_031`: "Audit log write failed: {reason}."

**Examples**:
```yaml
Example: Recognition Audit Log
  Transaction 1:
    Type: RECOGNITION_AWARDED
    Nominator: Sarah Johnson (EMP_100)
    Nominee: Mike Chen (EMP_050)
    Event Type: INNOVATION_AWARD
    Points: 1,500
    Timestamp: 2025-12-15 10:30:00
    IP: 192.168.1.100
    Status: APPROVED
    Approver: Tom Wilson (EMP_200)
  
  Transaction 2:
    Type: POINTS_REDEEMED
    Employee: Mike Chen (EMP_050)
    Perk: Starbucks $50 Gift Card
    Points: 1,000
    Balance Before: 2,500
    Balance After: 1,500
    Timestamp: 2025-12-15 14:45:00
    IP: 192.168.1.105
    Fulfillment: RED-2025-001
  
  Transaction 3:
    Type: POINTS_EXPIRED
    Employee: Mike Chen (EMP_050)
    Points: 500
    Batch Date: 2024-12-15
    Expiration Date: 2025-12-15
    Balance Before: 1,500
    Balance After: 1,000
    Timestamp: 2025-12-15 23:59:59
    Reason: FIFO_EXPIRATION
```

**Related Requirements**:
- FR-TR-REC-010

**Related Entities**:
- AuditLog
- RecognitionTransaction

---

## Summary: Recognition Rules

**Total Rules**: 31  
**Priority Breakdown**:
- HIGH: 18 rules (58%)
- MEDIUM: 13 rules (42%)
- LOW: 0 rules

**Categories**:
1. Recognition Program Setup (10 rules) - FULL DETAIL ✓
2. Nominations & Approvals (10 rules) - SUMMARY FORMAT
3. Award Redemption & Reporting (11 rules) - SUMMARY FORMAT

**Key Highlights**:
- Comprehensive program configuration
- Multiple program types (spot, service, peer-to-peer)
- Points-based recognition system
- Service anniversary automation
- Budget tracking and alerts
- Approval workflows
- Tax reporting integration

**Note**: Batch 1 (10 rules) completed with full detail. Batches 2-3 (21 rules) completed with summary format for efficiency while maintaining comprehensive coverage.

---

**Status**: ✅ Recognition Rules Complete (31/31)

**Progress**: 198/~300 rules (66%)

**Completed Sub-Modules**: 4/11
1. Core Compensation (51 rules) ✓
2. Variable Pay (50 rules) ✓
3. Benefits (66 rules) ✓
4. Recognition (31 rules) ✓

**Next Sub-Module**: Offer Management (34 rules)


---

