entity: ShiftPattern
version: "1.0"
layer: configuration

description: |
  Reusable template defining work hours, breaks, and days for a shift.
  Used to create actual shift assignments.
attributes:
  id:
    type: UUID
    required: true
    description: "Unique identifier"
  code:
    type: string
    required: true
    unique: true
    maxLength: 50
    description: "Unique code (e.g., DAY_SHIFT, NIGHT_SHIFT)"
  name:
    type: string
    required: true
    maxLength: 255
    description: "Display name"
  description:
    type: string
    required: false
    description: "Detailed description"
  startTime:
    type: time
    required: true
    description: "Shift start time (e.g., 08:00)"
  endTime:
    type: time
    required: true
    description: "Shift end time (e.g., 17:00)"
  duration:
    type: decimal
    required: true
    description: "Total hours (e.g., 8.0, 9.5)"
  breakDuration:
    type: decimal
    required: false
    default: 0
    description: "Total break time in hours"
  workingDays:
    type: array
    items: enum[MON,TUE,WED,THU,FRI,SAT,SUN]
    required: true
    description: "Days this pattern applies to"
  isOvernight:
    type: boolean
    default: false
    description: "Whether shift crosses midnight"
  color:
    type: string
    required: false
    description: "Display color for UI (hex code)"
  isActive:
    type: boolean
    default: true
    description: "Whether pattern is active"
  effectiveDate:
    type: date
    required: true
  endDate:
    type: date
    required: false
  createdAt:
    type: datetime
    required: true
  updatedAt:
    type: datetime
    required: true
relationships:
  hasShifts:
    target: Shift
    cardinality: "0..*"
    description: "Shifts created from this pattern"
  hasBreaks:
    target: ShiftBreak
    cardinality: "0..*"
    description: "Break periods within shift"
constraints:
  - name: "valid_time_range"
    type: check
    condition: "endTime > startTime OR isOvernight = true"
  - name: "unique_code"
    type: unique
    fields: [code]
businessRules:
  - "Duration must account for break time"
  - "Overnight shifts must have endTime < startTime"
  - "Working days cannot be empty"
