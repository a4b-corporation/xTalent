$schema: "https://xtalent.io/schemas/entity/v3"
$id: "xtalent:core:org-structure:business-unit-type"

entity: BusinessUnitType
classification: REFERENCE_DATA
module: CO
submodule: org-structure
version: "1.0"

definition: |
  Types of business units (DIVISION, DEPARTMENT, TEAM, etc.) for classification
  and hierarchy rules.

description: |
  Defines the types of business units with hierarchy rules and level ordering.

purpose: "Business unit type classification and hierarchy rules"

mixins:
  - HasEffectiveDates

# ----------------------------------------------------------------------------
# ATTRIBUTES
# ----------------------------------------------------------------------------
attributes:
  id:
    type: uuid
    required: true
    primary_key: true
    
  code:
    type: string
    required: true
    unique: true
    max_length: 50
    description: "Business unit type code"
    examples:
      - "DIVISION"
      - "DEPARTMENT"
      - "TEAM"
      - "SECTION"
    
  name:
    type: string
    required: true
    max_length: 100
    description: "Business unit type name"
    
  level_order:
    type: integer
    required: true
    description: "Hierarchy level order (lower = higher in hierarchy)"
    
  metadata:
    type: jsonb
    required: false
    description: "Additional rules (e.g., allowed_child types)"
    schema:
      type: object
      properties:
        allowed_child:
          type: array
          items: string

# ----------------------------------------------------------------------------
# VALIDATION RULES
# ----------------------------------------------------------------------------
validation_rules:
  - rule: "unique_code"
    expression: "UNIQUE(code)"
    message: "Business unit type code must be unique"
    severity: ERROR

# ----------------------------------------------------------------------------
# EXAMPLES
# ----------------------------------------------------------------------------
examples:
  - name: "Division Type"
    data:
      code: "DIVISION"
      name: "Division"
      level_order: 1
      metadata:
        allowed_child: ["DEPARTMENT", "SECTION"]
        
  - name: "Department Type"
    data:
      code: "DEPARTMENT"
      name: "Department"
      level_order: 2
      metadata:
        allowed_child: ["TEAM", "SECTION"]
        
  - name: "Team Type"
    data:
      code: "TEAM"
      name: "Team"
      level_order: 3
      metadata:
        allowed_child: []

references:
  database_design: "../../../03-design/1.core.v4.dbml#org_bu.type"

metadata:
  created_at: "2025-12-25"
  dbml_source: "org_bu.type (lines 451-460)"
