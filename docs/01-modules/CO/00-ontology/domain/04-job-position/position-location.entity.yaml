$schema: "https://xtalent.io/schemas/entity/v3"
$id: "xtalent:core:job-position:position-location"

entity: PositionLocation
classification: ENTITY
module: CO
submodule: job-position
version: "1.0"

definition: "Position work location mapping with effective dating"

parent_aggregate: Position

mixins:
  - HasEffectiveDates

attributes:
  position_id: {type: uuid, required: true, foreign_key: position.id}
  work_location_id: {type: uuid, required: true, foreign_key: work_location.id}
  is_primary: {type: boolean, required: true, default: false}

relationships:
  position:
    target: Position
    cardinality: N:1
    required: true
    on_delete: CASCADE
  work_location:
    target: WorkLocation
    cardinality: N:1
    required: true

indexes:
  - name: idx_position_location
    columns: [position_id, is_primary]

references:
  database_design: "../../../03-design/1.core.v4.dbml#jobpos.position_location"

metadata:
  created_at: "2025-12-25"
  dbml_source: "jobpos.position_location (lines 1304-1313)"
