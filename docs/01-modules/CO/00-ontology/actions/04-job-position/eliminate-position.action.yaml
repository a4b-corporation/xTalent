$schema: "https://xtalent.io/schemas/action/v3"
$id: "xtalent:core:job-position:eliminate-position"

action: EliminatePosition
module: CO
submodule: job-position
version: "1.0"

inputs:
  position_id: {type: uuid, required: true}
  reason: {type: string, required: true}

preconditions:
  - condition: "no active assignments"
    check: "actual_headcount = 0"

effects:
  database:
    - operation: UPDATE
      table: jobpos.position
      data:
        status_code: "ELIMINATED"
        effective_end_date: "today()"
        is_current_flag: false
  events:
    - event: PositionEliminated

authorization:
  required_roles: [HR_ADMIN, ORG_ADMIN]

api:
  rest:
    method: POST
    path: "/api/v1/positions/{position_id}/eliminate"

metadata:
  created_at: "2025-12-25"
